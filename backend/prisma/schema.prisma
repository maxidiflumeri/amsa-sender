generator client {
  provider = "prisma-client-js"
}

//datasource db {
//  provider = "sqlite"
//  url      = "file:./dev.db"
//}

datasource db {
  provider = "mysql"
  url      = "mysql://root:123456@localhost:3306/whatsapp_automation"
}

model Campaña {
  id         Int         @id @default(autoincrement())
  nombre     String
  createdAt  DateTime    @default(now())
  enviadoAt  DateTime?
  estado     String      @default("pendiente") // nuevo campo
  pausada    Boolean   @default(false) // <-- NUEVO
  contactos  Contacto[]
  reportes   Reporte[]
  archivada  Boolean @default(false)
  sesiones   String?   // JSON.stringified sessionIds
  config     Json?     // { batchSize, delayEntreMensajes, delayEntreLotes }
}

model Contacto {
  id         Int      @id @default(autoincrement())
  numero     String
  mensaje    String
  campañaId  Int
  campaña    Campaña  @relation(fields: [campañaId], references: [id])
}

model Reporte {
  id         Int         @id @default(autoincrement())
  numero     String
  mensaje    String
  estado     String
  enviadoAt  DateTime?   // nuevo campo
  campaña   Campaña? @relation(fields: [campañaId], references: [id], onDelete: SetNull)
  campañaId Int?
}

model Sesion {
  id         Int      @id @default(autoincrement())
  sessionId  String   @unique
  estado     String
  ani        String?   // nuevo campo opcional
}